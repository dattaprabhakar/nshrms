{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
    <div class="welcome-banner">
        <h1 class="display-5">Welcome, {{ user.full_name }}!</h1>
        <p class="lead">Your Employee ID: {{ user.employee_id }}</p>
    </div>

    <div class="row">
        <!-- Attendance Card -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                   <i class="bi bi-clock-history"></i> Today's Attendance
                </div>
                <div class="card-body">
                    <p><strong>Status:</strong>
                        {% if attendance_status.clocked_in %}
                            <span class="badge bg-success">Clocked In</span> at {{ attendance_status.clock_in_time.strftime('%H:%M:%S') if attendance_status.clock_in_time else 'N/A' }}
                            {% if attendance_status.clocked_out %}
                                | <span class="badge bg-secondary">Clocked Out</span> at {{ attendance_status.clock_out_time.strftime('%H:%M:%S') if attendance_status.clock_out_time else 'N/A' }}
                            {% else %}
                                <span class="badge bg-info">In Progress</span>
                            {% endif %}
                        {% else %}
                            <span class="badge bg-warning text-dark">Not Clocked In</span>
                        {% endif %}
                    </p>

                    <div class="mt-3">
                        {% if not attendance_status.clocked_in %}
                            <form action="{{ url_for('clock_in') }}" method="POST" style="display: inline;">
                                <button type="submit" class="btn btn-success"><i class="bi bi-box-arrow-in-right"></i> Clock In</button>
                            </form>
                        {% elif not attendance_status.clocked_out %}
                            <form action="{{ url_for('clock_out') }}" method="POST" style="display: inline;">
                                <button type="submit" class="btn btn-warning"><i class="bi bi-box-arrow-left"></i> Clock Out</button>
                            </form>
                        {% else %}
                            <p class="text-muted">Attendance complete for today.</p>
                        {% endif %}
                    </div>
                </div>
                 <div class="card-footer text-muted">
                     {{ now().strftime('%A, %B %d, %Y') }}
                 </div>
            </div>
        </div>

        <!-- Quick Links Card -->
        <div class="col-md-6">
             <div class="card">
                 <div class="card-header">
                     <i class="bi bi-link-45deg"></i> Quick Links
                 </div>
                 <div class="list-group list-group-flush">
                    <a href="{{ url_for('view_attendance') }}" class="list-group-item list-group-item-action"><i class="bi bi-calendar-check"></i> View Attendance History</a>
                    <a href="{{ url_for('view_leaves') }}" class="list-group-item list-group-item-action"><i class="bi bi-calendar-x"></i> View Leave Requests</a>
                    <a href="{{ url_for('apply_leave') }}" class="list-group-item list-group-item-action"><i class="bi bi-calendar-plus"></i> Apply for Leave</a>
                    <a href="{{ url_for('view_payslips') }}" class="list-group-item list-group-item-action"><i class="bi bi-file-earmark-text"></i> View Payslips</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}