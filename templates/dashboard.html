{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
    <div class="welcome-banner">
        <h1 class="display-6">Welcome, {{ user.full_name | title }}!</h1> {# Added title case #}
        <p class="lead mb-0">Employee ID: {{ user.employee_id }}</p>
    </div>

    <div class="row">
        <!-- Attendance Card -->
        <div class="col-lg-7 col-md-6 mb-4"> {# Adjusted column size #}
            <div class="card h-100"> {# Added h-100 for equal height cards #}
                <div class="card-header">
                   <i class="bi bi-clock-history"></i> Today's Attendance
                </div>
                <div class="card-body">
                    {# ... (rest of the attendance status content) ... #}
                     <p><strong>Status:</strong>
                            {% if attendance_status.clocked_in %}
                                <span class="badge bg-success">Clocked In</span> at {{ attendance_status.clock_in_time.strftime('%H:%M:%S') if attendance_status.clock_in_time else 'N/A' }}
                                {% if attendance_status.clocked_out %}
                                    | <span class="badge bg-secondary">Clocked Out</span> at {{ attendance_status.clock_out_time.strftime('%H:%M:%S') if attendance_status.clock_out_time else 'N/A' }}
                                {% else %}
                                    <span class="badge bg-info text-dark">In Progress</span> {# Added text-dark for better contrast #}
                                {% endif %}
                            {% else %}
                                <span class="badge bg-warning text-dark">Not Clocked In</span>
                            {% endif %}
                        </p>

                        <div class="mt-3">
                            {% if not attendance_status.clocked_in %}
                                <form action="{{ url_for('clock_in') }}" method="POST" style="display: inline;">
                                    <button type="submit" class="btn btn-success"><i class="bi bi-box-arrow-in-right"></i> Clock In</button>
                                </form>
                            {% elif not attendance_status.clocked_out %}
                                <form action="{{ url_for('clock_out') }}" method="POST" style="display: inline;">
                                    <button type="submit" class="btn btn-warning"><i class="bi bi-box-arrow-left"></i> Clock Out</button>
                                </form>
                            {% else %}
                                <p class="text-success"><i class="bi bi-check-circle-fill"></i> Attendance complete for today.</p> {# Improved message #}
                            {% endif %}
                        </div>
                </div>
                 <div class="card-footer text-muted">
                     {# CORRECTED USAGE #}
                     {{ now.strftime('%A, %B %d, %Y') }}
                 </div>
            </div>
        </div>

        <!-- Quick Links Card -->
        <div class="col-lg-5 col-md-6 mb-4"> {# Adjusted column size #}
             <div class="card h-100"> {# Added h-100 for equal height cards #}
                 <div class="card-header">
                     <i class="bi bi-link-45deg"></i> Quick Links
                 </div>
                 <div class="list-group list-group-flush">
                    <a href="{{ url_for('view_attendance') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span><i class="bi bi-calendar-check me-2"></i> View Attendance</span> <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('view_leaves') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                         <span><i class="bi bi-calendar-x me-2"></i> View Leaves</span> <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('apply_leave') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                         <span><i class="bi bi-calendar-plus me-2"></i> Apply for Leave</span> <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('view_payslips') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                         <span><i class="bi bi-file-earmark-text me-2"></i> View Payslips</span> <i class="bi bi-chevron-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}